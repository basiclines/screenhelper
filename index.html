<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />

		<title>Screen helper</title>

		<script>
		// Trun it to false to always install 'normal' package
		var supportHIDPI = true;
		var isFFOS = ("mozApps" in navigator && navigator.userAgent.search("Mobile") != -1);

		if ( isFFOS ) {

			// This URL must be a full url.
			// var URL = 'http://192.168.1.101/mozilla/apps/screenhelper/build/';
			var URL = 'http://basiclines.github.io/screenhelper/build/';

			if ( window.devicePixelRatio > 1.2 && supportHIDPI ) {
				var manifestUrl = URL+'package@2x.manifest';
			} else {
				var manifestUrl = URL+'package.manifest';
			}

			var req = navigator.mozApps.installPackage(manifestUrl);
			req.onsuccess = function() {
				console.log(this.result.origin);
			};
			req.onerror = function() {
				console.log(this.error.name);
			};

		} else {
			window.location.href = window.location.href+"app"
		}

		</script>
	</head>

	<body></body>
</html>


